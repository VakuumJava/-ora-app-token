-- Тестовые данные для Admin Panel

-- =============================================================================
-- ВАЖНО: Выполняйте этот скрипт ТОЛЬКО после выполнения миграций 005 и 006
-- =============================================================================

-- Очистка тестовых данных (опционально, раскомментируйте если нужно)
-- DELETE FROM audit_log;
-- DELETE FROM drop_spawn_points;
-- DELETE FROM drops;
-- DELETE FROM spawn_points;
-- DELETE FROM user_cards;
-- DELETE FROM user_shards;
-- DELETE FROM shards;
-- DELETE FROM cards;
-- DELETE FROM collections;

-- =============================================================================
-- 1. КОЛЛЕКЦИИ
-- =============================================================================

INSERT INTO collections (id, name, description, cover_url, chain, royalty_pct, active) VALUES
('00000000-0000-0000-0000-000000000001', 'Urban Relics', 'Артефакты городской истории', 'https://picsum.photos/800/600?random=1', 'ethereum', 5.0, true),
('00000000-0000-0000-0000-000000000002', 'Natural Wonders', 'Чудеса природы в городе', 'https://picsum.photos/800/600?random=2', 'polygon', 2.5, true),
('00000000-0000-0000-0000-000000000003', 'Tech Legacy', 'Технологическое наследие', 'https://picsum.photos/800/600?random=3', 'ethereum', 7.5, true);

-- =============================================================================
-- 2. КАРТОЧКИ
-- =============================================================================

INSERT INTO cards (id, collection_id, name, description, supply_cap, minted_count, image_url, rarity, active) VALUES
-- Urban Relics
('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'Старинный компас', 'Викторианский навигационный инструмент 1880-х годов', 1000, 234, 'https://picsum.photos/400/600?random=11', 'rare', true),
('10000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'Карманные часы', 'Швейцарские часы начала XX века', 500, 156, 'https://picsum.photos/400/600?random=12', 'epic', true),
('10000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'Телеграфный ключ', 'Морской телеграфный ключ 1920-х', 2000, 89, 'https://picsum.photos/400/600?random=13', 'common', true),

-- Natural Wonders
('10000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000002', 'Редкий минерал', 'Уникальный кристалл из городских раскопок', 300, 78, 'https://picsum.photos/400/600?random=14', 'legendary', true),
('10000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000002', 'Окаменелость', 'Древняя окаменелость возрастом 50 млн лет', 800, 234, 'https://picsum.photos/400/600?random=15', 'rare', true),

-- Tech Legacy
('10000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000003', 'Первый компьютер', 'Макет первого городского компьютера', 150, 45, 'https://picsum.photos/400/600?random=16', 'legendary', true);

-- =============================================================================
-- 3. ОСКОЛКИ (3 на каждую карточку)
-- =============================================================================

-- Старинный компас
INSERT INTO shards (id, card_id, shard_index, name, image_url, icon_url) VALUES
('20000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000001', 1, 'Компас - Корпус', 'https://picsum.photos/400/600?random=101', 'https://picsum.photos/64/64?random=201'),
('20000000-0000-0000-0000-000000000002', '10000000-0000-0000-0000-000000000001', 2, 'Компас - Стрелка', 'https://picsum.photos/400/600?random=102', 'https://picsum.photos/64/64?random=202'),
('20000000-0000-0000-0000-000000000003', '10000000-0000-0000-0000-000000000001', 3, 'Компас - Крышка', 'https://picsum.photos/400/600?random=103', 'https://picsum.photos/64/64?random=203');

-- Карманные часы
INSERT INTO shards (id, card_id, shard_index, name, image_url, icon_url) VALUES
('20000000-0000-0000-0000-000000000004', '10000000-0000-0000-0000-000000000002', 1, 'Часы - Механизм', 'https://picsum.photos/400/600?random=104', 'https://picsum.photos/64/64?random=204'),
('20000000-0000-0000-0000-000000000005', '10000000-0000-0000-0000-000000000002', 2, 'Часы - Циферблат', 'https://picsum.photos/400/600?random=105', 'https://picsum.photos/64/64?random=205'),
('20000000-0000-0000-0000-000000000006', '10000000-0000-0000-0000-000000000002', 3, 'Часы - Цепочка', 'https://picsum.photos/400/600?random=106', 'https://picsum.photos/64/64?random=206');

-- Телеграфный ключ
INSERT INTO shards (id, card_id, shard_index, name, image_url, icon_url) VALUES
('20000000-0000-0000-0000-000000000007', '10000000-0000-0000-0000-000000000003', 1, 'Телеграф - База', 'https://picsum.photos/400/600?random=107', 'https://picsum.photos/64/64?random=207'),
('20000000-0000-0000-0000-000000000008', '10000000-0000-0000-0000-000000000003', 2, 'Телеграф - Ключ', 'https://picsum.photos/400/600?random=108', 'https://picsum.photos/64/64?random=208'),
('20000000-0000-0000-0000-000000000009', '10000000-0000-0000-0000-000000000003', 3, 'Телеграф - Провода', 'https://picsum.photos/400/600?random=109', 'https://picsum.photos/64/64?random=209');

-- Редкий минерал
INSERT INTO shards (id, card_id, shard_index, name, image_url, icon_url) VALUES
('20000000-0000-0000-0000-000000000010', '10000000-0000-0000-0000-000000000004', 1, 'Минерал - Грань 1', 'https://picsum.photos/400/600?random=110', 'https://picsum.photos/64/64?random=210'),
('20000000-0000-0000-0000-000000000011', '10000000-0000-0000-0000-000000000004', 2, 'Минерал - Грань 2', 'https://picsum.photos/400/600?random=111', 'https://picsum.photos/64/64?random=211'),
('20000000-0000-0000-0000-000000000012', '10000000-0000-0000-0000-000000000004', 3, 'Минерал - Грань 3', 'https://picsum.photos/400/600?random=112', 'https://picsum.photos/64/64?random=212');

-- Окаменелость
INSERT INTO shards (id, card_id, shard_index, name, image_url, icon_url) VALUES
('20000000-0000-0000-0000-000000000013', '10000000-0000-0000-0000-000000000005', 1, 'Окаменелость - Часть 1', 'https://picsum.photos/400/600?random=113', 'https://picsum.photos/64/64?random=213'),
('20000000-0000-0000-0000-000000000014', '10000000-0000-0000-0000-000000000005', 2, 'Окаменелость - Часть 2', 'https://picsum.photos/400/600?random=114', 'https://picsum.photos/64/64?random=214'),
('20000000-0000-0000-0000-000000000015', '10000000-0000-0000-0000-000000000005', 3, 'Окаменелость - Часть 3', 'https://picsum.photos/400/600?random=115', 'https://picsum.photos/64/64?random=215');

-- Первый компьютер
INSERT INTO shards (id, card_id, shard_index, name, image_url, icon_url) VALUES
('20000000-0000-0000-0000-000000000016', '10000000-0000-0000-0000-000000000006', 1, 'Компьютер - Процессор', 'https://picsum.photos/400/600?random=116', 'https://picsum.photos/64/64?random=216'),
('20000000-0000-0000-0000-000000000017', '10000000-0000-0000-0000-000000000006', 2, 'Компьютер - Память', 'https://picsum.photos/400/600?random=117', 'https://picsum.photos/64/64?random=217'),
('20000000-0000-0000-0000-000000000018', '10000000-0000-0000-0000-000000000006', 3, 'Компьютер - Корпус', 'https://picsum.photos/400/600?random=118', 'https://picsum.photos/64/64?random=218');

-- =============================================================================
-- 4. ТОЧКИ СПАВНА
-- =============================================================================

-- Координаты примеры для разных городов (замените на свои)
-- Москва: 55.7558, 37.6173
-- Бишкек: 42.8746, 74.5698
-- Алматы: 43.2220, 76.8512

-- Компас - распределены по городу
INSERT INTO spawn_points (shard_id, lat, lng, qty_total, qty_left, starts_at, ends_at, active, radius_m, hold_seconds) VALUES
('20000000-0000-0000-0000-000000000001', 55.7558, 37.6173, 10, 7, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000001', 55.7600, 37.6200, 5, 5, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000002', 55.7550, 37.6150, 8, 6, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000002', 55.7580, 37.6190, 12, 12, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000003', 55.7540, 37.6160, 6, 3, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000003', 55.7570, 37.6180, 15, 15, '2025-01-01', '2025-12-31', true, 5, 3);

-- Часы
INSERT INTO spawn_points (shard_id, lat, lng, qty_total, qty_left, starts_at, ends_at, active, radius_m, hold_seconds) VALUES
('20000000-0000-0000-0000-000000000004', 42.8746, 74.5698, 5, 5, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000005', 42.8760, 74.5710, 5, 4, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000006', 42.8730, 74.5680, 5, 5, '2025-01-01', '2025-12-31', true, 5, 3);

-- Телеграф
INSERT INTO spawn_points (shard_id, lat, lng, qty_total, qty_left, starts_at, ends_at, active, radius_m, hold_seconds) VALUES
('20000000-0000-0000-0000-000000000007', 43.2220, 76.8512, 20, 18, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000008', 43.2240, 76.8530, 20, 20, '2025-01-01', '2025-12-31', true, 5, 3),
('20000000-0000-0000-0000-000000000009', 43.2200, 76.8500, 20, 15, '2025-01-01', '2025-12-31', true, 5, 3);

-- =============================================================================
-- 5. ДРОПЫ
-- =============================================================================

INSERT INTO drops (id, name, description, starts_at, ends_at, active) VALUES
('30000000-0000-0000-0000-000000000001', 'Новогодний дроп', 'Специальный праздничный дроп с повышенным спавном', '2025-12-20', '2025-12-31', true),
('30000000-0000-0000-0000-000000000002', 'Весенний марафон', 'Весеннее событие с новыми точками', '2025-03-01', '2025-03-31', false);

-- Привязка точек к дропам
INSERT INTO drop_spawn_points (drop_id, spawn_point_id)
SELECT '30000000-0000-0000-0000-000000000001', id FROM spawn_points LIMIT 5;

-- =============================================================================
-- 6. WEB3 КОНФИГУРАЦИЯ (пример)
-- =============================================================================

INSERT INTO web3_config (chain, rpc_url, contract_address, abi, mint_function, active) VALUES
('ethereum', 'https://mainnet.infura.io/v3/YOUR_KEY', '0x0000000000000000000000000000000000000000', '[]', 'mintTo', true);

-- =============================================================================
-- ПРОВЕРКА ДАННЫХ
-- =============================================================================

-- Количество записей в каждой таблице
SELECT 
  'collections' as table_name, COUNT(*) as count FROM collections
UNION ALL
SELECT 'cards', COUNT(*) FROM cards
UNION ALL
SELECT 'shards', COUNT(*) FROM shards
UNION ALL
SELECT 'spawn_points', COUNT(*) FROM spawn_points
UNION ALL
SELECT 'drops', COUNT(*) FROM drops
UNION ALL
SELECT 'settings', COUNT(*) FROM settings;

-- Проверка связей
SELECT 
  c.name as collection,
  COUNT(DISTINCT ca.id) as cards,
  COUNT(DISTINCT s.id) as shards,
  COUNT(DISTINCT sp.id) as spawn_points
FROM collections c
LEFT JOIN cards ca ON ca.collection_id = c.id
LEFT JOIN shards s ON s.card_id = ca.id
LEFT JOIN spawn_points sp ON sp.shard_id = s.id
GROUP BY c.id, c.name;

-- =============================================================================
-- ГОТОВО!
-- =============================================================================

-- Теперь можно:
-- 1. Открыть админ-панель: http://localhost:3000/admin-panel
-- 2. Увидеть 3 коллекции, 6 карточек, 18 осколков, ~12 точек
-- 3. Проверить дашборд со статистикой
-- 4. Протестировать все функции
