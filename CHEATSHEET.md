# üìù –ü–∞–º—è—Ç–∫–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç—É QORA NFT Platform

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase PostgreSQL)
- –¢–∞–±–ª–∏—Ü–∞ `profiles` —Å **—É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –Ω–∏–∫–Ω–µ–π–º–∞–º–∏** ‚ö°
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä
- Row Level Security (RLS)
- –§—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π nickname –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í—Ö–æ–¥ –ø–æ email –∏–ª–∏ nickname
- JWT —Ç–æ–∫–µ–Ω—ã –∏ —Å–µ—Å—Å–∏–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

### ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- 11 —ç–∫—Ä–∞–Ω–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- 20+ API endpoints
- CSV –∏–º–ø–æ—Ä—Ç —Ç–æ—á–µ–∫
- –ê—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pnpm install

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase
cp .env.example .env.local
# –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ credentials

# 3. –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é
# Supabase Dashboard ‚Üí SQL Editor
# scripts/008_create_profiles_with_unique_nicknames.sql

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
pnpm dev
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—á–∏—Ç–∞–π—Ç–µ –ø–æ –ø–æ—Ä—è–¥–∫—É)

### –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö:
1. **QUICK_DATABASE_SETUP.md** - 5 –º–∏–Ω—É—Ç
2. **SUPABASE_SETUP.md** - 10 –º–∏–Ω—É—Ç (–ø–æ–¥—Ä–æ–±–Ω–æ)
3. **DATABASE_IMPLEMENTATION.md** - —á—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –î–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
4. **DATABASE_SCHEMA_VISUAL.md** - –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞
5. **ARCHITECTURE.md** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–¥–º–∏–Ω–∫–æ–π:
6. **ADMIN_PANEL.md** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–¥–º–∏–Ω–∫–µ
7. **API_EXAMPLES.md** - –ø—Ä–∏–º–µ—Ä—ã API
8. **QUICKSTART.md** - –±—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

---

## üîë –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

### SQL –º–∏–≥—Ä–∞—Ü–∏–∏:
```
scripts/
‚îú‚îÄ‚îÄ 008_create_profiles_with_unique_nicknames.sql  # –ü—Ä–æ—Ñ–∏–ª–∏ ‚≠ê
‚îú‚îÄ‚îÄ 005_create_admin_tables.sql                     # –ê–¥–º–∏–Ω–∫–∞
‚îú‚îÄ‚îÄ 006_admin_functions.sql                         # –§—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ 007_test_data.sql                               # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ test_queries.sql                                # –ó–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
```

### Backend:
```
app/api/auth/
‚îî‚îÄ‚îÄ check-nickname/route.ts  # API –ø—Ä–æ–≤–µ—Ä–∫–∏ nickname

lib/
‚îú‚îÄ‚îÄ auth.ts                  # Auth —Å–µ—Ä–≤–∏—Å (Supabase)
‚îú‚îÄ‚îÄ admin-utils.ts           # –£—Ç–∏–ª–∏—Ç—ã –∞–¥–º–∏–Ω–∫–∏
‚îî‚îÄ‚îÄ supabase/                # Supabase –∫–ª–∏–µ–Ω—Ç—ã
```

### Frontend:
```
app/
‚îú‚îÄ‚îÄ register/page.tsx        # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π nickname
‚îú‚îÄ‚îÄ login/page.tsx           # –í—Ö–æ–¥
‚îî‚îÄ‚îÄ admin-panel/page.tsx     # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
```

---

## üî• –ì–ª–∞–≤–Ω–∞—è —Ñ–∏—á–∞: –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–∏–∫–Ω–µ–π–º—ã

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç nickname ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
2. API `/api/auth/check-nickname` ‚Üí SQL —Ñ—É–Ω–∫—Ü–∏—è
3. `check_nickname_available()` ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î (case-insensitive)
4. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí ‚úì –¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ ‚úó –∑–∞–Ω—è—Ç
5. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Üí —Ç—Ä–∏–≥–≥–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å

### –ì–∞—Ä–∞–Ω—Ç–∏—è:
- **Alikhan** –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω!
- `Alikhan`, `alikhan`, `ALIKHAN` - –≤—Å–µ —Å—á–∏—Ç–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è: 3-20 —Å–∏–º–≤–æ–ª–æ–≤, —Ç–æ–ª—å–∫–æ a-z, A-Z, 0-9, _

---

## üìä –¢–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ:
- `profiles` - –ü—Ä–æ—Ñ–∏–ª–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ nickname
- `collections` - NFT –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `cards` - –ö–∞—Ä—Ç–æ—á–∫–∏
- `shards` - –û—Å–∫–æ–ª–∫–∏ (3 –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É)
- `spawn_points` - –¢–æ—á–∫–∏ —Å–ø–∞–≤–Ω–∞
- `user_shards` - –û—Å–∫–æ–ª–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `user_cards` - –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `listings` - –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å

### –°–ª—É–∂–µ–±–Ω—ã–µ:
- `admin_roles` - –†–æ–ª–∏ –∞–¥–º–∏–Ω–æ–≤
- `settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- `audit_log` - –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π

---

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
pnpm dev              # –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
pnpm build            # –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
pnpm start            # –ó–∞–ø—É—Å–∫ prod –≤–µ—Ä—Å–∏–∏

# –ü—Ä–æ–≤–µ—Ä–∫–∞
pnpm lint             # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
pnpm lint --fix       # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pnpm install          # –£—Å—Ç–∞–Ω–æ–≤–∫–∞
pnpm update           # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
pnpm outdated         # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö
```

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "Supabase is not configured"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env.local`, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `pnpm dev`

### "Table profiles does not exist"
‚Üí –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é 008 –≤ Supabase SQL Editor

### "Nickname already taken" —Å—Ä–∞–∑—É
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `check_nickname_available` —Å–æ–∑–¥–∞–Ω–∞

### Email –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
‚Üí –û—Ç–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email –≤ Supabase (–¥–ª—è dev)

---

## üéì SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```sql
-- –í—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏
SELECT * FROM profiles;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ nickname
SELECT check_nickname_available('test');

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT * FROM profile_stats;

-- –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0)
SELECT LOWER(nickname), COUNT(*)
FROM profiles
GROUP BY LOWER(nickname)
HAVING COUNT(*) > 1;
```

---

## üåê API endpoints

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ nickname
GET /api/auth/check-nickname?nickname=test

# –ê–¥–º–∏–Ω–∫–∞
GET /api/admin/dashboard
GET /api/admin/collections
POST /api/admin/collections
...
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### RLS –ü–æ–ª–∏—Ç–∏–∫–∏:
- –ü—Ä–æ—Ñ–∏–ª–∏: –≤—Å–µ —á–∏—Ç–∞—é—Ç, —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∏–∑–º–µ–Ω—è–µ—Ç
- –û—Å–∫–æ–ª–∫–∏: —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –≤–∏–¥–∏—Ç —Å–≤–æ–∏
- –ö–∞—Ä—Ç–æ—á–∫–∏: —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –≤–∏–¥–∏—Ç —Å–≤–æ–∏
- –õ–∏—Å—Ç–∏–Ω–≥–∏: –≤—Å–µ –≤–∏–¥—è—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ

### –í–∞–ª–∏–¥–∞—Ü–∏—è:
- Nickname: 3-20 —Å–∏–º–≤–æ–ª–æ–≤, —Ç–æ–ª—å–∫–æ a-z, 0-9, _
- Password: –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤
- Email: –≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ nickname, email, user_id
- View –¥–ª—è –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Connection pooling (Supabase)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Supabase
2. ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å nickname
4. üîÑ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–º–∏–≥—Ä–∞—Ü–∏–∏ 005, 006)
5. üé® –î–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏ –∫–∞—Ä—Ç–æ—á–∫–∏
6. üó∫Ô∏è –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
7. üéÆ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Supabase Dashboard](https://app.supabase.com/)
- [Supabase Docs](https://supabase.com/docs)
- [Next.js Docs](https://nextjs.org/docs)
- [PostgreSQL Docs](https://www.postgresql.org/docs/)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ TROUBLESHOOTING —Å–µ–∫—Ü–∏—é –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `scripts/test_queries.sql` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Supabase Dashboard
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–∏–∫–Ω–µ–π–º—ã
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- ‚úÖ API
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ**

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 25 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ
