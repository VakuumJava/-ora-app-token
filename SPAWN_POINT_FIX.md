# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "Failed to create spawn point"

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –£–ª—É—á—à–µ–Ω API —Å–æ–∑–¥–∞–Ω–∏—è spawn points
**–§–∞–π–ª:** `/app/api/admin/spawn-points/create/route.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è `shard` –≤ –ë–î
- ‚úÖ –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –ø–æ–Ω—è—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ shard –≤ –æ—Ç–≤–µ—Ç–µ

### 2. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ shards
**–§–∞–π–ª:** `/app/api/admin/shards/route.ts` (–ù–û–í–´–ô)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö shards –¥–ª—è –∞–¥–º–∏–Ω–∫–∏
- –í–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞—Ä—Ç–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ä–µ–¥–∫–æ—Å—Ç—å)
- –£–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è dropdown –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "shards": [
    {
      "id": "shard-id-1",
      "label": "A",
      "cardId": "card-common-1",
      "cardName": "–ö–∞–º–µ–Ω–Ω–∞—è –ü–∏—Ä–∞–º–∏–¥–∞",
      "cardRarity": "common",
      "displayName": "–ö–∞–º–µ–Ω–Ω–∞—è –ü–∏—Ä–∞–º–∏–¥–∞ - Fragment A"
    },
    ...
  ]
}
```

### 3. –ù–∞–ø–æ–ª–Ω–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
**–ö–æ–º–∞–Ω–¥–∞:** `npx tsx prisma/seed.ts`

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- ‚úÖ 1 –∫–æ–ª–ª–µ–∫—Ü–∏—è (Qora Collection)
- ‚úÖ 5 –∫–∞—Ä—Ç (common, uncommon, rare, epic, legendary)
- ‚úÖ 15 shards (–ø–æ 3 –æ—Å–∫–æ–ª–∫–∞ A/B/C –Ω–∞ –∫–∞–∂–¥—É—é –∫–∞—Ä—Ç—É)

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ shards
```typescript
const response = await fetch('/api/admin/shards')
const { shards } = await response.json()
```

### –®–∞–≥ 2: –ü–æ–∫–∞–∑–∞—Ç—å –≤ dropdown
```tsx
<select name="shardId">
  {shards.map(shard => (
    <option key={shard.id} value={shard.id}>
      {shard.displayName}
    </option>
  ))}
</select>
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å spawn point
```typescript
const response = await fetch('/api/admin/spawn-points/create', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    shardId: selectedShardId, // ID –∏–∑ dropdown
    latitude: clickedLat,
    longitude: clickedLng,
    radius: 5,
    expiresAt: null // –∏–ª–∏ Date –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
  })
})
```

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ:

### ‚ùå Error: "Shard with ID XXX not found"
**–ü—Ä–∏—á–∏–Ω–∞:** –£–∫–∞–∑–∞–Ω –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π shardId  
**–†–µ—à–µ–Ω–∏–µ:** 
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API `/api/admin/shards` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∞–ª–∏–¥–Ω—ã—Ö ID
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–∞–∑–∞ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞: `npx tsx prisma/seed.ts`

### ‚ùå Error: "Shard ID, latitude and longitude are required"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è  
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è:
- `shardId` (string)
- `latitude` (number)
- `longitude` (number)

### ‚ùå Error: "Failed to create spawn point"
**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î  
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏)
2. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ DATABASE_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Prisma –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```
Card (–ö–∞—Ä—Ç–∞)
  ‚îú‚îÄ‚îÄ id: "card-common-1"
  ‚îú‚îÄ‚îÄ name: "–ö–∞–º–µ–Ω–Ω–∞—è –ü–∏—Ä–∞–º–∏–¥–∞"
  ‚îú‚îÄ‚îÄ rarity: "common"
  ‚îî‚îÄ‚îÄ shards: [
        ‚îú‚îÄ‚îÄ Shard A (id: "shard-xxx-a")
        ‚îú‚îÄ‚îÄ Shard B (id: "shard-xxx-b")
        ‚îî‚îÄ‚îÄ Shard C (id: "shard-xxx-c")
      ]

SpawnPoint (–¢–æ—á–∫–∞ —Å–ø–∞–≤–Ω–∞)
  ‚îú‚îÄ‚îÄ id: auto-generated UUID
  ‚îú‚îÄ‚îÄ shardId: "shard-xxx-a" ‚Üí —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ Shard
  ‚îú‚îÄ‚îÄ latitude: 55.7558
  ‚îú‚îÄ‚îÄ longitude: 37.6173
  ‚îú‚îÄ‚îÄ radius: 5
  ‚îú‚îÄ‚îÄ active: true
  ‚îî‚îÄ‚îÄ expiresAt: null
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ shards —Å–æ–∑–¥–∞–Ω—ã:
```bash
npx prisma studio
# –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É Shard - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 15 –∑–∞–ø–∏—Å–µ–π
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API:
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ shards
curl http://localhost:3000/api/admin/shards | jq

# –°–æ–∑–¥–∞—Ç—å spawn point
curl -X POST http://localhost:3000/api/admin/spawn-points/create \
  -H "Content-Type: application/json" \
  -d '{
    "shardId": "ID_–ò–ó_–°–ü–ò–°–ö–ê_–í–´–®–ï",
    "latitude": 55.7558,
    "longitude": 37.6173,
    "radius": 5
  }'
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Prisma Studio:
- –¢–∞–±–ª–∏—Ü–∞ `SpawnPoint` –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
- –°–≤—è–∑—å —Å `Shard` –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å

---

## ‚úÖ –ò—Ç–æ–≥–æ:

–û—à–∏–±–∫–∞ "Failed to create spawn point" —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç:
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–∏—á–∏–Ω–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è shard
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∞–ª–∏–¥–Ω—ã—Ö shardId

**–ê–¥–º–∏–Ω–∫–∞ —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç:**
1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ—Å–∫–æ–ª–∫–æ–≤
2. –ü–æ–∫–∞–∑–∞—Ç—å –∏—Ö –≤ –ø–æ–Ω—è—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
3. –°–æ–∑–¥–∞—Ç—å spawn point —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º shardId
4. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –æ—à–∏–±–∫—É –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
