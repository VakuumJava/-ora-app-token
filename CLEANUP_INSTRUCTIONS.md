# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—á–∏—Å—Ç–∫–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Railway

## –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –≤–∏–¥–Ω–æ **–º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫** (–ö–∞–º–µ–Ω–Ω–∞—è –ü–∏—Ä–∞–º–∏–¥–∞, –ó–æ–ª–æ—Ç–æ–π –î—Ä–∞–∫–æ–Ω, –ö–æ—Ä–æ–Ω–∞ –°—É–¥—å–±—ã), –Ω–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ **1 –∫–∞—Ä—Ç–æ—á–∫–∞ "Qora Card"** —Å **3 –æ—Å–∫–æ–ª–∫–∞–º–∏**.

## –ü—Ä–∏—á–∏–Ω–∞
–°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–ª–∏—Å—å –≤ –±–∞–∑–µ –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ seed —Å 5 –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏.

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ API (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://qora.store/api/admin/reset-database
```

2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å (—á–µ—Ä–µ–∑ Postman –∏–ª–∏ curl):
```bash
curl -X POST https://qora.store/api/admin/reset-database
```

3. API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –£–¥–∞–ª–∏—Ç –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –æ—Å–∫–æ–ª–∫–∏
   - –°–æ–∑–¥–∞—Å—Ç 1 –∫–∞—Ä—Ç–æ—á–∫—É "Qora Card"
   - –°–æ–∑–¥–∞—Å—Ç 3 –æ—Å–∫–æ–ª–∫–∞ (A, B, C)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Railway CLI

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ:
```bash
railway connect postgres
```

2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç:
```sql
-- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
DELETE FROM "UserShard";
DELETE FROM "UserCard";
DELETE FROM "SpawnPoint";
DELETE FROM "Shard";
DELETE FROM "Card";
DELETE FROM "Collection";
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ seed:
```bash
railway run npx tsx prisma/seed.ts
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ build script

Seed –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `upsert`, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏. –ù—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –æ—á–∏—Å—Ç–∏—Ç—å –±–∞–∑—É –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –í–∞—Ä–∏–∞–Ω—Ç 1 –∏–ª–∏ 2.

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –≤ –±–∞–∑–µ –±—É–¥–µ—Ç:
- ‚úÖ 1 –∫–æ–ª–ª–µ–∫—Ü–∏—è: "Qora Collection"
- ‚úÖ 1 –∫–∞—Ä—Ç–æ—á–∫–∞: "Qora Card" (rare)
- ‚úÖ 3 –æ—Å–∫–æ–ª–∫–∞: Fragment A, B, C

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ "User not found"

**–ü—Ä–∏—á–∏–Ω–∞:** `CardDetailsModal` –æ—Ç–ø—Ä–∞–≤–ª—è–ª `card.owner` (nickname) –≤–º–µ—Å—Ç–æ `userId` (UUID).

**–†–µ—à–µ–Ω–∏–µ:** –¢–µ–ø–µ—Ä—å –±–µ—Ä—ë—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π `userId` –∏–∑ `localStorage` (qora_autologin_userId).

```typescript
// –ë—ã–ª–æ
userId: card.owner || 'demo_user'  // ‚ùå nickname

// –°—Ç–∞–ª–æ
const savedUserId = localStorage.getItem('qora_autologin_userId')
userId: savedUserId  // ‚úÖ UUID
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å `/admin/spawn-points` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 3 –æ—Å–∫–æ–ª–∫–∞
2. –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ—Å–ª–µ —Å–±–æ—Ä–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Qora Card - Fragment A/B/C"
3. –ú–∏–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–∫–∏ "User not found"
